{"title":"Eloquent自动维护int类型的时间","uid":"76ef2e250c5014c401277f737e1b27cf","slug":"Eloquent自动维护int类型的时间","date":"2020-08-12T03:20:16.000Z","updated":"2021-06-21T10:35:56.782Z","comments":true,"path":"api/articles/Eloquent自动维护int类型的时间.json","cover":"https://cdn.shouts.dev/wp-content/uploads/2020/08/14223540/some-useful-timestamp-tricks-in-laravel.png","content":"<p>火星救援，刻不容缓！</p>\n<span id=\"more\"></span>\n\n<p>Laravel Eloquent提供了自动维护<code>created_at</code>、<code>updated_at</code>的功能，时间的默认类型为格式化的字符串(<code>Carbon\\Carbon::toString()的返回值</code>)。<br>如果表设计是存储Unix时间戳，可以通过一个trait支持。</p>\n<pre class=\"line-numbers language-php\" data-language=\"php\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Models</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">trait</span> <span class=\"token class-name\">UseUnixTimestamp</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">freshTimestamp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">time</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fromDateTime</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$value</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getDateFormat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string single-quoted-string\">'U'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<pre class=\"line-numbers language-php\" data-language=\"php\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Models</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">UseUnixTimestamp</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyModel</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Model</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">use</span> <span class=\"token package\">UseUnixTimestamp</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">//</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>","text":"火星救援，刻不容缓！ Laravel Eloquent提供了自动维护created_at、updated_at的功能，时间的默认类型为格式化的字符串(Carbon\\Carbon::toString()的返回值)。如果表设计是存储Unix时间戳，可以通过一个trait支持。 nam...","link":"","photos":[],"count_time":{"symbolsCount":561,"symbolsTime":"1 mins."},"categories":[{"name":"php","slug":"php","count":13,"path":"api/categories/php.json"}],"tags":[{"name":"laravel","slug":"laravel","count":10,"path":"api/tags/laravel.json"}],"toc":"","author":{"name":"CloudyCity","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/17662451?s=400&u=643d94296b79c5e8424a2177fc4609a5e0ebeae0&v=4","link":"/","description":"拖延并发强迫症懒癌晚期患者","socials":{"github":"https://github.com/CloudyCity","twitter":"","stackoverflow":"https://stackoverflow.com/users/9827779/cloudycity","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://b23.tv/MK4nKb"},"steam":{"icon":"/svg/steam.svg","link":"https://steamcommunity.com/id/cloudycity"}}}},"mapped":true,"prev_post":{"title":"使用Laravel-Mix构建Asset","uid":"771f319b1167e8a6f517a3bd10fbf0af","slug":"使用Laravel-Mix构建Asset","date":"2020-11-03T10:31:58.000Z","updated":"2021-06-21T10:35:56.784Z","comments":true,"path":"api/articles/使用Laravel-Mix构建Asset.json","cover":"https://repository-images.githubusercontent.com/76991633/43a4fe80-025e-11eb-8b88-bf742e4412a7","text":"公司几个后台老项目的asset都没有构建方案，直接放到版本控制仓库里，臃肿凌乱，加载速度也堪忧。最近开发一个新后台，决定改用laravel-mix构建asset。 改造前的文件结构(Git) Click to see more ├── public │ ├── asset │ │...","link":"","photos":[],"count_time":{"symbolsCount":"24k","symbolsTime":"22 mins."},"categories":[{"name":"前端","slug":"前端","count":4,"path":"api/categories/前端.json"}],"tags":[{"name":"webpack","slug":"webpack","count":2,"path":"api/tags/webpack.json"}],"author":{"name":"CloudyCity","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/17662451?s=400&u=643d94296b79c5e8424a2177fc4609a5e0ebeae0&v=4","link":"/","description":"拖延并发强迫症懒癌晚期患者","socials":{"github":"https://github.com/CloudyCity","twitter":"","stackoverflow":"https://stackoverflow.com/users/9827779/cloudycity","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://b23.tv/MK4nKb"},"steam":{"icon":"/svg/steam.svg","link":"https://steamcommunity.com/id/cloudycity"}}}}},"next_post":{"title":"如何引用同一级查询的列别名作为新列","uid":"0abd40c040136e2dd273f02ae6ffdae7","slug":"如何引用同一级查询的列别名作为新列","date":"2019-08-03T15:46:21.000Z","updated":"2021-06-21T10:35:56.782Z","comments":true,"path":"api/articles/如何引用同一级查询的列别名作为新列.json","cover":"https://fs.buttercms.com/resize=width:940/BzVPXsRRQh2CF2GF8uKF","text":"火星救援，刻不容缓！ 示例表： mysql> SELECT * FROM core; +--------+--------+--------+ | field1 | field2 | field3 | +--------+--------+--------+ | 1 | 2 | ...","link":"","photos":[],"count_time":{"symbolsCount":"1.8k","symbolsTime":"2 mins."},"categories":[{"name":"db","slug":"db","count":1,"path":"api/categories/db.json"}],"tags":[{"name":"mysql","slug":"mysql","count":2,"path":"api/tags/mysql.json"}],"author":{"name":"CloudyCity","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/17662451?s=400&u=643d94296b79c5e8424a2177fc4609a5e0ebeae0&v=4","link":"/","description":"拖延并发强迫症懒癌晚期患者","socials":{"github":"https://github.com/CloudyCity","twitter":"","stackoverflow":"https://stackoverflow.com/users/9827779/cloudycity","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://b23.tv/MK4nKb"},"steam":{"icon":"/svg/steam.svg","link":"https://steamcommunity.com/id/cloudycity"}}}}}}