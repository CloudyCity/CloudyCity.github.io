{"title":"如何更好的通过IDE代码检查","uid":"16ed07eb79eb4256778e578efa799c1a","slug":"如何更好的通过IDE代码检查","date":"2019-04-12T10:14:54.000Z","updated":"2021-08-27T07:26:03.628Z","comments":true,"path":"api/articles/如何更好的通过IDE代码检查.json","cover":"https://reinteractive.com/assets/services/inspect/reinteractive-code-inspect-c5d765882bb6372e935ed243f658df90f04b84e62000c9887be744db44933ca3.jpg","content":"<p>我身边有很多同事都没有重视代码检查，每次看他们IDE右侧都是一边红黄棕交错的“线谱”，特别难受。让自己的代码通过IDE的检查，可以避免很多低级的错误。下面分享下如何更好地通过Intellij系列IDE的代码检查。</p>\n<span id=\"more\"></span>\n\n<h2 id=\"目标是什么\"><a href=\"#目标是什么\" class=\"headerlink\" title=\"目标是什么\"></a>目标是什么</h2><p>目标是无任何notice，包括英文的拼写检查。</p>\n<p><img src=\"https://user-images.githubusercontent.com/17662451/56026151-2b79b080-5d46-11e9-942a-cf3a6e2f1251.png\" alt=\"image\"></p>\n<h2 id=\"为什么要达成目标\"><a href=\"#为什么要达成目标\" class=\"headerlink\" title=\"为什么要达成目标\"></a>为什么要达成目标</h2><p>通过代码检查可以：</p>\n<ol>\n<li>一定程度上规范开发</li>\n<li>更容易发现bug，避免低级错误</li>\n</ol>\n<h2 id=\"如何达成目标\"><a href=\"#如何达成目标\" class=\"headerlink\" title=\"如何达成目标\"></a>如何达成目标</h2><h3 id=\"遵守必要规则\"><a href=\"#遵守必要规则\" class=\"headerlink\" title=\"遵守必要规则\"></a>遵守必要规则</h3><p>至于判断【规则是否必要】的标准因人而异，但确定是【必要规则】就必须遵守，这是代码检查的意义。</p>\n<h3 id=\"关闭不必要规则\"><a href=\"#关闭不必要规则\" class=\"headerlink\" title=\"关闭不必要规则\"></a>关闭不必要规则</h3><h4 id=\"全局关闭\"><a href=\"#全局关闭\" class=\"headerlink\" title=\"全局关闭\"></a>全局关闭</h4><p>不必要的检查规则，例如<code>No data sources configured</code>、<code>SQL dialect detection</code>等等，可以将其关闭。</p>\n<p>在<code>Inspection Notice</code>处按<code>Alt+Enter</code>打开<code>Inspection setting</code>：</p>\n<p><img src=\"https://user-images.githubusercontent.com/17662451/56027292-5bc24e80-5d48-11e9-971b-5287659b78b2.png\" alt=\"image\"></p>\n<p>去掉勾：</p>\n<p><img src=\"https://user-images.githubusercontent.com/17662451/56027516-c7a4b700-5d48-11e9-8f69-378e1813e4c0.png\" alt=\"image\"></p>\n<p>效果：</p>\n<p><img src=\"https://user-images.githubusercontent.com/17662451/56027837-66311800-5d49-11e9-988b-3e62fc334866.png\" alt=\"image\"></p>\n<h4 id=\"单次忽略\"><a href=\"#单次忽略\" class=\"headerlink\" title=\"单次忽略\"></a>单次忽略</h4><p>有些规则是必要的，但因为某些原因我们无法遵守。可以选择<code>Suppress for statement</code>，将会自动在Notice前加入一行注释告诉IDE忽略掉此处的检查。</p>\n<h3 id=\"引导IDE\"><a href=\"#引导IDE\" class=\"headerlink\" title=\"引导IDE\"></a>引导IDE</h3><p>某些场景规则是必要的，我们也遵守了，只是IDE没有get到仍标出Notice，这时候就需要想办法引导IDE去get到。</p>\n<h4 id=\"添加注释\"><a href=\"#添加注释\" class=\"headerlink\" title=\"添加注释\"></a>添加注释</h4><p>以常见的闭包Notice为例，内部都会报warning：</p>\n<p><img src=\"https://user-images.githubusercontent.com/17662451/56028531-ed32c000-5d4a-11e9-9366-9f4317722243.png\" alt=\"image\"></p>\n<p>使用<code>/** @var 变量类型 $var */</code>声明</p>\n<p><img src=\"https://user-images.githubusercontent.com/17662451/56028596-15222380-5d4b-11e9-9708-fcc929688472.png\" alt=\"image\"></p>\n<h4 id=\"添加助手文件\"><a href=\"#添加助手文件\" class=\"headerlink\" title=\"添加助手文件\"></a>添加助手文件</h4><p>IDE无法识别<code>Laravel</code>的<code>Facade</code>的静态调用方式</p>\n<p><img src=\"https://user-images.githubusercontent.com/17662451/56030055-7eeffc80-5d4e-11e9-948d-ca0babc090ec.png\" alt=\"image\"></p>\n<p>这时候需要创建额外的助手文件<code>ide-helper.php</code>，里面存放类声明：</p>\n<p><img src=\"https://user-images.githubusercontent.com/17662451/56029813-dd68ab00-5d4d-11e9-943b-b6ba5ba3fed2.png\" alt=\"image\"></p>\n<p>IDE识别后：</p>\n<p><img src=\"https://user-images.githubusercontent.com/17662451/56030160-c2e30180-5d4e-11e9-9c1d-ec7520ddf42d.png\" alt=\"image\"></p>\n<p>P.S. 助手文件本身是可以忽略检查，即选择<code>suppress all for file</code>项。</p>\n<h3 id=\"拼写检查\"><a href=\"#拼写检查\" class=\"headerlink\" title=\"拼写检查\"></a>拼写检查</h3><p>英文拼写检查的优先级比较低，但能遵守的话可以避免一些奇怪的命名</p>\n<h4 id=\"使用下划线或驼峰通过检查\"><a href=\"#使用下划线或驼峰通过检查\" class=\"headerlink\" title=\"使用下划线或驼峰通过检查\"></a>使用下划线或驼峰通过检查</h4><p><img src=\"https://user-images.githubusercontent.com/17662451/56073778-c6709a00-5ddb-11e9-81ea-45060bd96408.png\" alt=\"image\"></p>\n<h4 id=\"将专有名词加入字典\"><a href=\"#将专有名词加入字典\" class=\"headerlink\" title=\"将专有名词加入字典\"></a>将专有名词加入字典</h4><p><img src=\"https://user-images.githubusercontent.com/17662451/56073788-e607c280-5ddb-11e9-97b4-5c613d17658e.png\" alt=\"image\"></p>\n<p><img src=\"https://user-images.githubusercontent.com/17662451/56073791-ed2ed080-5ddb-11e9-951f-01978e085219.png\" alt=\"image\"></p>\n<h4 id=\"给随机字符串添加忽略注释\"><a href=\"#给随机字符串添加忽略注释\" class=\"headerlink\" title=\"给随机字符串添加忽略注释\"></a>给随机字符串添加忽略注释</h4><p><img src=\"https://user-images.githubusercontent.com/17662451/56073816-439c0f00-5ddc-11e9-8547-e9c518f623f3.png\" alt=\"image\"></p>\n<p><img src=\"https://user-images.githubusercontent.com/17662451/56073819-4ac31d00-5ddc-11e9-8cd4-9272251938f7.png\" alt=\"image\"></p>\n<p><img src=\"https://user-images.githubusercontent.com/17662451/56073831-5878a280-5ddc-11e9-990f-36b9b6d5a8ae.png\" alt=\"image\"></p>\n<h3 id=\"导出-导入配置\"><a href=\"#导出-导入配置\" class=\"headerlink\" title=\"导出/导入配置\"></a>导出/导入配置</h3><p>导出配置以备份、与团队成员共享</p>\n<p><img src=\"https://user-images.githubusercontent.com/17662451/56073885-befdc080-5ddc-11e9-80d8-a320054ccdc0.png\" alt=\"image\"></p>\n","text":"我身边有很多同事都没有重视代码检查，每次看他们IDE右侧都是一边红黄棕交错的“线谱”，特别难受。让自己的代码通过IDE的检查，可以避免很多低级的错误。下面分享下如何更好地通过Intellij系列IDE的代码检查。 目标是什么目标是无任何notice，包括英文的拼写检查。 为什么要...","link":"","photos":[],"count_time":{"symbolsCount":830,"symbolsTime":"1 mins."},"categories":[{"name":"新手村","slug":"新手村","count":7,"path":"api/categories/新手村.json"}],"tags":[],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%9B%AE%E6%A0%87%E6%98%AF%E4%BB%80%E4%B9%88\"><span class=\"toc-text\">目标是什么</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E8%BE%BE%E6%88%90%E7%9B%AE%E6%A0%87\"><span class=\"toc-text\">为什么要达成目标</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%A6%82%E4%BD%95%E8%BE%BE%E6%88%90%E7%9B%AE%E6%A0%87\"><span class=\"toc-text\">如何达成目标</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%81%B5%E5%AE%88%E5%BF%85%E8%A6%81%E8%A7%84%E5%88%99\"><span class=\"toc-text\">遵守必要规则</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%85%B3%E9%97%AD%E4%B8%8D%E5%BF%85%E8%A6%81%E8%A7%84%E5%88%99\"><span class=\"toc-text\">关闭不必要规则</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%85%A8%E5%B1%80%E5%85%B3%E9%97%AD\"><span class=\"toc-text\">全局关闭</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%8D%95%E6%AC%A1%E5%BF%BD%E7%95%A5\"><span class=\"toc-text\">单次忽略</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%BC%95%E5%AF%BCIDE\"><span class=\"toc-text\">引导IDE</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%B7%BB%E5%8A%A0%E6%B3%A8%E9%87%8A\"><span class=\"toc-text\">添加注释</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%B7%BB%E5%8A%A0%E5%8A%A9%E6%89%8B%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">添加助手文件</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%8B%BC%E5%86%99%E6%A3%80%E6%9F%A5\"><span class=\"toc-text\">拼写检查</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8%E4%B8%8B%E5%88%92%E7%BA%BF%E6%88%96%E9%A9%BC%E5%B3%B0%E9%80%9A%E8%BF%87%E6%A3%80%E6%9F%A5\"><span class=\"toc-text\">使用下划线或驼峰通过检查</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%B0%86%E4%B8%93%E6%9C%89%E5%90%8D%E8%AF%8D%E5%8A%A0%E5%85%A5%E5%AD%97%E5%85%B8\"><span class=\"toc-text\">将专有名词加入字典</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E7%BB%99%E9%9A%8F%E6%9C%BA%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%B7%BB%E5%8A%A0%E5%BF%BD%E7%95%A5%E6%B3%A8%E9%87%8A\"><span class=\"toc-text\">给随机字符串添加忽略注释</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AF%BC%E5%87%BA-%E5%AF%BC%E5%85%A5%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">导出&#x2F;导入配置</span></a></li></ol></li></ol>","author":{"name":"CloudyCity","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/17662451?s=400&u=643d94296b79c5e8424a2177fc4609a5e0ebeae0&v=4","link":"/","description":"拖延并发强迫症懒癌晚期患者","socials":{"github":"https://github.com/CloudyCity","twitter":"","stackoverflow":"https://stackoverflow.com/users/9827779/cloudycity","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://b23.tv/MK4nKb"},"steam":{"icon":"/svg/steam.svg","link":"https://steamcommunity.com/id/cloudycity"}}}},"mapped":true,"prev_post":{"title":"使用satis搭建私有Composer库","uid":"ad23f6f0a2b244ea9443c9602b422b7a","slug":"使用satis搭建私有Composer库","date":"2019-04-16T08:05:33.000Z","updated":"2021-08-27T07:26:03.629Z","comments":true,"path":"api/articles/使用satis搭建私有Composer库.json","cover":"https://magently.com/app/uploads/2019/08/satis-1.jpg","text":"人类的本质是复读机。 最近整理项目，将一些复用的轮子封装成Composer组件，但不便于放在packgist.org，所以需要搭建私有的Composer库。 开发composer组件以之前的一遍文章 Laravel/Lumen 扩展DB Builder语法 的功能为例。 在组件项...","link":"","photos":[],"count_time":{"symbolsCount":"3.5k","symbolsTime":"3 mins."},"categories":[{"name":"php","slug":"php","count":13,"path":"api/categories/php.json"}],"tags":[{"name":"composer","slug":"composer","count":1,"path":"api/tags/composer.json"}],"author":{"name":"CloudyCity","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/17662451?s=400&u=643d94296b79c5e8424a2177fc4609a5e0ebeae0&v=4","link":"/","description":"拖延并发强迫症懒癌晚期患者","socials":{"github":"https://github.com/CloudyCity","twitter":"","stackoverflow":"https://stackoverflow.com/users/9827779/cloudycity","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://b23.tv/MK4nKb"},"steam":{"icon":"/svg/steam.svg","link":"https://steamcommunity.com/id/cloudycity"}}}}},"next_post":{"title":"Laravel/Lumen 扩展DB Builder语法","uid":"c1faf785f7bcfca48734b5774b3466cc","slug":"Laravel-Lumen-扩展DB-Builder语法","date":"2019-04-12T08:24:51.000Z","updated":"2021-08-27T07:26:03.629Z","comments":true,"path":"api/articles/Laravel-Lumen-扩展DB-Builder语法.json","cover":"https://www.georgebuckingham.com/content/images/2020/10/laravel-upserts.jpg","text":"截至5.6版本，Laravel的DB Builder都没有方法实现忽略插入与插入或更新（5.7版本新增updateOrInsert()）。除了自己封装多一层之外，还有一个更优雅的解决方案是对Builder语法进行扩展。 扩展支持的语法这里要扩展的是三个常用的语法: INSERT ...","link":"","photos":[],"count_time":{"symbolsCount":"14k","symbolsTime":"13 mins."},"categories":[{"name":"php","slug":"php","count":13,"path":"api/categories/php.json"}],"tags":[{"name":"laravel","slug":"laravel","count":10,"path":"api/tags/laravel.json"}],"author":{"name":"CloudyCity","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/17662451?s=400&u=643d94296b79c5e8424a2177fc4609a5e0ebeae0&v=4","link":"/","description":"拖延并发强迫症懒癌晚期患者","socials":{"github":"https://github.com/CloudyCity","twitter":"","stackoverflow":"https://stackoverflow.com/users/9827779/cloudycity","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://b23.tv/MK4nKb"},"steam":{"icon":"/svg/steam.svg","link":"https://steamcommunity.com/id/cloudycity"}}}}}}